<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="reactBlue" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#61DAFB;stop-opacity:0.4"/>
      <stop offset="100%" style="stop-color:#61DAFB;stop-opacity:0.2"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#68A063;stop-opacity:0.4"/>
      <stop offset="100%" style="stop-color:#68A063;stop-opacity:0.2"/>
    </linearGradient>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3178C6;stop-opacity:0.4"/>
      <stop offset="100%" style="stop-color:#3178C6;stop-opacity:0.2"/>
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFC400;stop-opacity:0.4"/>
      <stop offset="100%" style="stop-color:#FFC400;stop-opacity:0.2"/>
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8A2BE2;stop-opacity:0.4"/>
      <stop offset="100%" style="stop-color:#8A2BE2;stop-opacity:0.2"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">MR BunkManager - System Architecture</text>

  <!-- Platform Icons -->
  <text x="150" y="60" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#666">iOS</text>
  <text x="250" y="60" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#666">Android</text>
  <text x="350" y="60" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#666">Web</text>

  <!-- Layer 1: Presentation Layer -->
  <rect x="50" y="70" width="700" height="80" rx="8" fill="url(#reactBlue)" stroke="#61DAFB" stroke-width="2"/>
  <text x="70" y="95" font-family="Arial" font-size="14" font-weight="bold" fill="#333">Presentation Layer</text>
  <text x="70" y="115" font-family="Arial" font-size="11" fill="#666">React Native + Expo Router + React Native Paper</text>

  <!-- Presentation components -->
  <rect x="100" y="125" width="80" height="20" rx="4" fill="white" stroke="#61DAFB"/>
  <text x="140" y="139" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Dashboard</text>

  <rect x="195" y="125" width="80" height="20" rx="4" fill="white" stroke="#61DAFB"/>
  <text x="235" y="139" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Timetable</text>

  <rect x="290" y="125" width="80" height="20" rx="4" fill="white" stroke="#61DAFB"/>
  <text x="330" y="139" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Attendance</text>

  <rect x="385" y="125" width="80" height="20" rx="4" fill="white" stroke="#61DAFB"/>
  <text x="425" y="139" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Groups</text>

  <rect x="480" y="125" width="80" height="20" rx="4" fill="white" stroke="#61DAFB"/>
  <text x="520" y="139" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Profile</text>

  <rect x="575" y="125" width="80" height="20" rx="4" fill="white" stroke="#61DAFB"/>
  <text x="615" y="139" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">AI Chat</text>

  <!-- Arrow 1 -->
  <path d="M400 150 L400 165" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <polygon points="400,170 395,160 405,160" fill="#666"/>

  <!-- Layer 2: Service Layer -->
  <rect x="50" y="175" width="700" height="80" rx="8" fill="url(#greenGrad)" stroke="#68A063" stroke-width="2"/>
  <text x="70" y="200" font-family="Arial" font-size="14" font-weight="bold" fill="#333">Service Layer</text>
  <text x="70" y="220" font-family="Arial" font-size="11" fill="#666">Business Logic Services</text>

  <!-- Service components -->
  <rect x="100" y="230" width="70" height="20" rx="4" fill="white" stroke="#68A063"/>
  <text x="135" y="244" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">Auth</text>

  <rect x="180" y="230" width="70" height="20" rx="4" fill="white" stroke="#68A063"/>
  <text x="215" y="244" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">Firestore</text>

  <rect x="260" y="230" width="70" height="20" rx="4" fill="white" stroke="#68A063"/>
  <text x="295" y="244" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">Chat</text>

  <rect x="340" y="230" width="70" height="20" rx="4" fill="white" stroke="#68A063"/>
  <text x="375" y="244" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">OCR</text>

  <rect x="420" y="230" width="70" height="20" rx="4" fill="white" stroke="#68A063"/>
  <text x="455" y="244" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">Notes</text>

  <rect x="500" y="230" width="70" height="20" rx="4" fill="white" stroke="#68A063"/>
  <text x="535" y="244" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">Groups</text>

  <rect x="580" y="230" width="70" height="20" rx="4" fill="white" stroke="#68A063"/>
  <text x="615" y="244" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">Cache</text>

  <!-- Arrow 2 -->
  <polygon points="400,275 395,265 405,265" fill="#666"/>

  <!-- Layer 3: State Management -->
  <rect x="50" y="280" width="700" height="60" rx="8" fill="url(#blueGrad)" stroke="#3178C6" stroke-width="2"/>
  <text x="70" y="305" font-family="Arial" font-size="14" font-weight="bold" fill="#333">State Management Layer</text>
  <text x="70" y="325" font-family="Arial" font-size="11" fill="#666">Zustand Stores</text>

  <!-- State components -->
  <rect x="250" y="300" width="80" height="20" rx="4" fill="white" stroke="#3178C6"/>
  <text x="290" y="314" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">authStore</text>

  <rect x="340" y="300" width="80" height="20" rx="4" fill="white" stroke="#3178C6"/>
  <text x="380" y="314" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">networkStore</text>

  <rect x="430" y="300" width="80" height="20" rx="4" fill="white" stroke="#3178C6"/>
  <text x="470" y="314" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">themeStore</text>

  <rect x="520" y="300" width="80" height="20" rx="4" fill="white" stroke="#3178C6"/>
  <text x="560" y="314" font-family="Arial" font-size="9" text-anchor="middle" fill="#333">notesStore</text>

  <!-- Arrows to data layer -->
  <polygon points="250,360 245,350 255,350" fill="#666"/>
  <polygon points="550,360 545,350 555,350" fill="#666"/>

  <!-- Layer 4a: Firebase -->
  <rect x="50" y="365" width="330" height="80" rx="8" fill="url(#orangeGrad)" stroke="#FFC400" stroke-width="2"/>
  <text x="70" y="390" font-family="Arial" font-size="14" font-weight="bold" fill="#333">Firebase Services</text>

  <rect x="70" y="405" width="80" height="25" rx="4" fill="white" stroke="#FFC400"/>
  <text x="110" y="422" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Firestore</text>

  <rect x="160" y="405" width="80" height="25" rx="4" fill="white" stroke="#FFC400"/>
  <text x="200" y="422" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Auth</text>

  <rect x="250" y="405" width="80" height="25" rx="4" fill="white" stroke="#FFC400"/>
  <text x="290" y="422" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">FCM</text>

  <!-- Layer 4b: External APIs -->
  <rect x="420" y="365" width="330" height="80" rx="8" fill="url(#purpleGrad)" stroke="#8A2BE2" stroke-width="2"/>
  <text x="440" y="390" font-family="Arial" font-size="14" font-weight="bold" fill="#333">External APIs</text>

  <rect x="440" y="405" width="80" height="25" rx="4" fill="white" stroke="#8A2BE2"/>
  <text x="480" y="422" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Groq AI</text>

  <rect x="530" y="405" width="80" height="25" rx="4" fill="white" stroke="#8A2BE2"/>
  <text x="570" y="422" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">OCR.space</text>

  <rect x="620" y="405" width="80" height="25" rx="4" fill="white" stroke="#8A2BE2"/>
  <text x="660" y="422" font-family="Arial" font-size="10" text-anchor="middle" fill="#333">Drive</text>

  <!-- Sync arrow between data layers -->
  <line x1="380" y1="405" x2="420" y2="405" stroke="#666" stroke-width="1.5" stroke-dasharray="5,3"/>
  <text x="400" y="398" font-family="Arial" font-size="8" text-anchor="middle" fill="#666">Sync</text>

  <!-- Footer -->
  <text x="400" y="475" font-family="Arial" font-size="10" text-anchor="middle" fill="#999">Fig. 1: Complete System Architecture</text>
</svg>
